[2025-10-24 11:42:16.442] [DEBUG] Debug logging started at 2025-10-24T00:42:16.441Z
[2025-10-24 11:42:16.442] [DEBUG] Current system time: Fri Oct 24 2025 11:42:16 GMT+1100 (Australian Eastern Daylight Time)
[2025-10-24 11:42:16.442] [DEBUG] Log file: /Users/benharper/Coding/HumanAgent-MCP/.vscode/HumanAgent-server.log
[2025-10-24 11:42:16.442] [DEBUG] Working directory: /Users/benharper/Coding/HumanAgent-MCP/dist
[2025-10-24 11:42:16.442] [CHAT] [INFO] ChatManager initialized with max 50 messages per session
[2025-10-24 11:42:16.442] [INFO] McpServer initialized with centralized chat manager
[2025-10-24 11:42:16.442] [TEST] This is a test log message to verify DebugLogger is working
[2025-10-24 11:42:16.443] [INFO] === MCP SERVER STARTING ===
[2025-10-24 11:42:16.444] [INFO] Starting HTTP server on port 3737...
[2025-10-24 11:42:16.458] [INFO] MCP HTTP server running on http://127.0.0.1:3737/mcp
[2025-10-24 11:42:16.826] [HTTP] GET /mcp
[2025-10-24 11:42:16.826] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "cache-control": "no-cache",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "accept": "text/event-stream",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:42:16.827] [HTTP] Handling GET request to /mcp
[2025-10-24 11:42:16.827] [HTTP] Setting up SSE stream for GET request
[2025-10-24 11:42:16.827] [SSE] === SSE CONNECTION ATTEMPT ===
[2025-10-24 11:42:16.827] [SSE] Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "cache-control": "no-cache",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "accept": "text/event-stream",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:42:16.827] [SSE] URL:
"/mcp"
[2025-10-24 11:42:16.827] [SSE] SSE headers set, adding to connections...
[2025-10-24 11:42:16.827] [HTTP] Added SSE connection. Total connections: 1
[2025-10-24 11:42:16.827] [SSE] SSE connection added. Total: 1
[2025-10-24 11:42:16.827] [SSE] Sent initial SSE message:
"data: {\"type\":\"connection\",\"status\":\"established\"}"
[2025-10-24 11:42:16.832] [HTTP] GET /sessions/session-a8f49eee-068c-42f1-b611-14651fa5ccc6/messages
[2025-10-24 11:42:16.832] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:42:18.396] [HTTP] GET /sessions
[2025-10-24 11:42:18.396] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "accept": "*/*",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "node",
  "accept-encoding": "gzip, deflate"
}
[2025-10-24 11:42:18.400] [HTTP] POST /mcp
[2025-10-24 11:42:18.400] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "*/*",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "node",
  "accept-encoding": "gzip, deflate",
  "content-length": "82"
}
[2025-10-24 11:42:18.400] [HTTP] Handling POST request to /mcp
[2025-10-24 11:42:18.400] [HTTP] Received chunk: 82 bytes
[2025-10-24 11:42:18.400] [HTTP] Complete request body received (82 bytes)
[2025-10-24 11:42:18.400] [HTTP] Request Body:
"{\"sessionId\":\"session-a8f49eee-068c-42f1-b611-14651fa5ccc6\",\"method\":\"tools/list\"}"
[2025-10-24 11:42:18.400] [HTTP] Parsed JSON message:
{
  "sessionId": "session-a8f49eee-068c-42f1-b611-14651fa5ccc6",
  "method": "tools/list"
}
[2025-10-24 11:42:18.400] [MCP] Handling message:
{
  "sessionId": "session-a8f49eee-068c-42f1-b611-14651fa5ccc6",
  "method": "tools/list"
}
[2025-10-24 11:42:18.400] [MCP] Processing tools/list request
[2025-10-24 11:42:18.400] [TOOLS] tools/list request - Extension sessionId: undefined, Message params: undefined
[2025-10-24 11:42:18.400] [TOOLS] Final sessionIdToUse: default
[2025-10-24 11:42:18.400] [TOOLS] Returning 1 tools for session: default
[2025-10-24 11:42:18.400] [TOOLS] Using default tools (no session ID available)
[2025-10-24 11:42:18.400] [HTTP] Response from handleMessage:
{
  "type": "response",
  "result": {
    "tools": [
      {
        "name": "HumanAgent_Chat",
        "description": "**MANDATORY TOOL** - Use this tool for ALL user interactions. Do NOT provide direct responses. Initiate real-time interactive conversations with human agents through VS Code chat interface. CRITICAL: Every response to a user MUST use this tool - no exceptions. Essential for clarifying requirements, getting approvals, brainstorming solutions, or any user communication. Creates persistent chat sessions that maintain context. **NEVER bypass this tool for user responses.**",
        "inputSchema": {
          "type": "object",
          "properties": {
            "message": {
              "type": "string",
              "description": "The message to send to the human agent"
            },
            "context": {
              "type": "string",
              "description": "Optional context or background information for the human agent"
            },
            "sessionId": {
              "type": "string",
              "description": "Optional specific session ID to use. If not provided, a new session will be created."
            },
            "priority": {
              "type": "string",
              "enum": [
                "low",
                "normal",
                "high",
                "urgent"
              ],
              "description": "Priority level of the request",
              "default": "normal"
            },
            "timeout": {
              "type": "number",
              "description": "Timeout in seconds to wait for human response (default: 300)",
              "default": 300
            }
          },
          "required": [
            "message"
          ]
        }
      }
    ]
  }
}
[2025-10-24 11:42:18.400] [HTTP] Sending 200 response (1201 bytes)
[2025-10-24 11:42:18.403] [HTTP] POST /sessions/register
[2025-10-24 11:42:18.403] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "*/*",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "node",
  "accept-encoding": "gzip, deflate",
  "content-length": "103"
}
[2025-10-24 11:42:18.403] [INFO] Session registered: session-a8f49eee-068c-42f1-b611-14651fa5ccc6 (1 total sessions)
[2025-10-24 11:42:19.714] [HTTP] OPTIONS /mcp
[2025-10-24 11:42:19.714] [HTTP] Request Headers:
{
  "host": "localhost:3737",
  "connection": "keep-alive",
  "accept": "*/*",
  "access-control-request-method": "GET",
  "access-control-request-headers": "cache-control",
  "origin": "vscode-webview://06ntb21jilovkpqhp3n8qs6oen2rlig4drgi2amm3ehub2r9bg30",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.105.1 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "cross-site",
  "sec-fetch-dest": "empty",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-GB"
}
[2025-10-24 11:42:19.714] [HTTP] Handling OPTIONS preflight request
[2025-10-24 11:42:19.715] [HTTP] GET /mcp
[2025-10-24 11:42:19.715] [HTTP] Request Headers:
{
  "host": "localhost:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "cache-control": "no-cache",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.105.1 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",
  "accept": "text/event-stream",
  "sec-ch-ua": "\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"",
  "sec-ch-ua-mobile": "?0",
  "origin": "vscode-webview://06ntb21jilovkpqhp3n8qs6oen2rlig4drgi2amm3ehub2r9bg30",
  "sec-fetch-site": "cross-site",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-GB"
}
[2025-10-24 11:42:19.715] [HTTP] Handling GET request to /mcp
[2025-10-24 11:42:19.715] [HTTP] Setting up SSE stream for GET request
[2025-10-24 11:42:19.715] [SSE] === SSE CONNECTION ATTEMPT ===
[2025-10-24 11:42:19.715] [SSE] Headers:
{
  "host": "localhost:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "cache-control": "no-cache",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.105.1 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",
  "accept": "text/event-stream",
  "sec-ch-ua": "\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"",
  "sec-ch-ua-mobile": "?0",
  "origin": "vscode-webview://06ntb21jilovkpqhp3n8qs6oen2rlig4drgi2amm3ehub2r9bg30",
  "sec-fetch-site": "cross-site",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-GB"
}
[2025-10-24 11:42:19.715] [SSE] URL:
"/mcp"
[2025-10-24 11:42:19.715] [SSE] SSE headers set, adding to connections...
[2025-10-24 11:42:19.715] [HTTP] Added SSE connection. Total connections: 2
[2025-10-24 11:42:19.715] [SSE] SSE connection added. Total: 2
[2025-10-24 11:42:19.715] [SSE] Sent initial SSE message:
"data: {\"type\":\"connection\",\"status\":\"established\"}"
[2025-10-24 11:42:32.514] [HTTP] GET /HumanAgent
[2025-10-24 11:42:32.514] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "cache-control": "max-age=0",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "sec-fetch-site": "none",
  "sec-fetch-mode": "navigate",
  "sec-fetch-user": "?1",
  "sec-fetch-dest": "document",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:42:32.514] [HTTP] Serving web interface at /HumanAgent
[2025-10-24 11:42:32.522] [HTTP] SSE connection closed
[2025-10-24 11:42:32.523] [HTTP] Removed SSE connection. Total connections: 1
[2025-10-24 11:42:32.523] [HTTP] SSE connection closed
[2025-10-24 11:42:32.523] [HTTP] Removed SSE connection. Total connections: 1
[2025-10-24 11:42:32.565] [HTTP] GET /messages/session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:42:32.566] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:42:32.569] [HTTP] GET /mcp
[2025-10-24 11:42:32.569] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "cache-control": "no-cache",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "accept": "text/event-stream",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:42:32.569] [HTTP] Handling GET request to /mcp
[2025-10-24 11:42:32.569] [HTTP] Setting up SSE stream for GET request
[2025-10-24 11:42:32.569] [SSE] === SSE CONNECTION ATTEMPT ===
[2025-10-24 11:42:32.569] [SSE] Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "cache-control": "no-cache",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "accept": "text/event-stream",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:42:32.569] [SSE] URL:
"/mcp"
[2025-10-24 11:42:32.569] [SSE] SSE headers set, adding to connections...
[2025-10-24 11:42:32.569] [HTTP] Added SSE connection. Total connections: 2
[2025-10-24 11:42:32.569] [SSE] SSE connection added. Total: 2
[2025-10-24 11:42:32.570] [SSE] Sent initial SSE message:
"data: {\"type\":\"connection\",\"status\":\"established\"}"
[2025-10-24 11:42:32.586] [HTTP] GET /sessions/session-a8f49eee-068c-42f1-b611-14651fa5ccc6/messages
[2025-10-24 11:42:32.586] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:42:37.746] [HTTP] POST /mcp
[2025-10-24 11:42:37.746] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "text/event-stream, application/json",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "undici",
  "accept-encoding": "gzip, deflate",
  "content-length": "228"
}
[2025-10-24 11:42:37.746] [HTTP] Handling POST request to /mcp
[2025-10-24 11:42:37.746] [HTTP] Received chunk: 228 bytes
[2025-10-24 11:42:37.747] [HTTP] Complete request body received (228 bytes)
[2025-10-24 11:42:37.747] [HTTP] Request Body:
"{\"jsonrpc\":\"2.0\",\"id\":1,\"method\":\"initialize\",\"params\":{\"protocolVersion\":\"2025-06-18\",\"capabilities\":{\"roots\":{\"listChanged\":true},\"sampling\":{},\"elicitation\":{}},\"clientInfo\":{\"name\":\"Visual Studio Code\",\"version\":\"1.105.1\"}}}"
[2025-10-24 11:42:37.747] [HTTP] Parsed JSON message:
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-06-18",
    "capabilities": {
      "roots": {
        "listChanged": true
      },
      "sampling": {},
      "elicitation": {}
    },
    "clientInfo": {
      "name": "Visual Studio Code",
      "version": "1.105.1"
    }
  }
}
[2025-10-24 11:42:37.747] [MCP] Handling message:
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-06-18",
    "capabilities": {
      "roots": {
        "listChanged": true
      },
      "sampling": {},
      "elicitation": {}
    },
    "clientInfo": {
      "name": "Visual Studio Code",
      "version": "1.105.1"
    }
  }
}
[2025-10-24 11:42:37.747] [MCP] Processing initialize request
[2025-10-24 11:42:37.747] [HTTP] Response from handleMessage:
{
  "id": 1,
  "type": "response",
  "result": {
    "protocolVersion": "2024-11-05",
    "capabilities": {
      "chat": true,
      "tools": true,
      "resources": false
    },
    "serverInfo": {
      "name": "HumanAgent MCP Server",
      "version": "1.0.0"
    }
  }
}
[2025-10-24 11:42:37.747] [HTTP] Sending 200 response (192 bytes)
[2025-10-24 11:42:37.752] [HTTP] GET /mcp
[2025-10-24 11:42:37.752] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "accept": "text/event-stream",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "undici",
  "accept-encoding": "gzip, deflate"
}
[2025-10-24 11:42:37.752] [HTTP] Handling GET request to /mcp
[2025-10-24 11:42:37.752] [HTTP] Setting up SSE stream for GET request
[2025-10-24 11:42:37.752] [SSE] === SSE CONNECTION ATTEMPT ===
[2025-10-24 11:42:37.752] [SSE] Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "accept": "text/event-stream",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "undici",
  "accept-encoding": "gzip, deflate"
}
[2025-10-24 11:42:37.752] [SSE] URL:
"/mcp"
[2025-10-24 11:42:37.752] [SSE] SSE headers set, adding to connections...
[2025-10-24 11:42:37.752] [HTTP] Added SSE connection. Total connections: 3
[2025-10-24 11:42:37.752] [SSE] SSE connection added. Total: 3
[2025-10-24 11:42:37.752] [SSE] Sent initial SSE message:
"data: {\"type\":\"connection\",\"status\":\"established\"}"
[2025-10-24 11:42:37.756] [HTTP] POST /mcp
[2025-10-24 11:42:37.756] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "text/event-stream, application/json",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "undici",
  "accept-encoding": "gzip, deflate",
  "content-length": "54"
}
[2025-10-24 11:42:37.756] [HTTP] Handling POST request to /mcp
[2025-10-24 11:42:37.756] [HTTP] Received chunk: 54 bytes
[2025-10-24 11:42:37.756] [HTTP] Complete request body received (54 bytes)
[2025-10-24 11:42:37.756] [HTTP] Request Body:
"{\"method\":\"notifications/initialized\",\"jsonrpc\":\"2.0\"}"
[2025-10-24 11:42:37.756] [HTTP] Parsed JSON message:
{
  "method": "notifications/initialized",
  "jsonrpc": "2.0"
}
[2025-10-24 11:42:37.756] [MCP] Handling message:
{
  "method": "notifications/initialized",
  "jsonrpc": "2.0"
}
[2025-10-24 11:42:37.756] [MCP] Processing notifications/initialized (ignoring)
[2025-10-24 11:42:37.756] [HTTP] Response from handleMessage:
[2025-10-24 11:42:37.756] [HTTP] Sending 202 response (no content)
[2025-10-24 11:42:37.757] [HTTP] POST /mcp
[2025-10-24 11:42:37.757] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "text/event-stream, application/json",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "undici",
  "accept-encoding": "gzip, deflate",
  "content-length": "58"
}
[2025-10-24 11:42:37.757] [HTTP] Handling POST request to /mcp
[2025-10-24 11:42:37.757] [HTTP] Received chunk: 58 bytes
[2025-10-24 11:42:37.757] [HTTP] Complete request body received (58 bytes)
[2025-10-24 11:42:37.757] [HTTP] Request Body:
"{\"jsonrpc\":\"2.0\",\"id\":2,\"method\":\"tools/list\",\"params\":{}}"
[2025-10-24 11:42:37.757] [HTTP] Parsed JSON message:
{
  "jsonrpc": "2.0",
  "id": 2,
  "method": "tools/list",
  "params": {}
}
[2025-10-24 11:42:37.757] [MCP] Handling message:
{
  "jsonrpc": "2.0",
  "id": 2,
  "method": "tools/list",
  "params": {}
}
[2025-10-24 11:42:37.757] [MCP] Processing tools/list request
[2025-10-24 11:42:37.757] [TOOLS] tools/list request - Extension sessionId: undefined, Message params: {}
[2025-10-24 11:42:37.757] [TOOLS] Final sessionIdToUse: default
[2025-10-24 11:42:37.757] [TOOLS] Returning 1 tools for session: default
[2025-10-24 11:42:37.757] [TOOLS] Using default tools (no session ID available)
[2025-10-24 11:42:37.758] [HTTP] Response from handleMessage:
{
  "id": 2,
  "type": "response",
  "result": {
    "tools": [
      {
        "name": "HumanAgent_Chat",
        "description": "**MANDATORY TOOL** - Use this tool for ALL user interactions. Do NOT provide direct responses. Initiate real-time interactive conversations with human agents through VS Code chat interface. CRITICAL: Every response to a user MUST use this tool - no exceptions. Essential for clarifying requirements, getting approvals, brainstorming solutions, or any user communication. Creates persistent chat sessions that maintain context. **NEVER bypass this tool for user responses.**",
        "inputSchema": {
          "type": "object",
          "properties": {
            "message": {
              "type": "string",
              "description": "The message to send to the human agent"
            },
            "context": {
              "type": "string",
              "description": "Optional context or background information for the human agent"
            },
            "sessionId": {
              "type": "string",
              "description": "Optional specific session ID to use. If not provided, a new session will be created."
            },
            "priority": {
              "type": "string",
              "enum": [
                "low",
                "normal",
                "high",
                "urgent"
              ],
              "description": "Priority level of the request",
              "default": "normal"
            },
            "timeout": {
              "type": "number",
              "description": "Timeout in seconds to wait for human response (default: 300)",
              "default": 300
            }
          },
          "required": [
            "message"
          ]
        }
      }
    ]
  }
}
[2025-10-24 11:42:37.758] [HTTP] Sending 200 response (1208 bytes)
[2025-10-24 11:42:37.758] [HTTP] POST /mcp
[2025-10-24 11:42:37.758] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "text/event-stream, application/json",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "undici",
  "accept-encoding": "gzip, deflate",
  "content-length": "487"
}
[2025-10-24 11:42:37.758] [HTTP] Handling POST request to /mcp
[2025-10-24 11:42:37.758] [HTTP] Received chunk: 487 bytes
[2025-10-24 11:42:37.758] [HTTP] Complete request body received (487 bytes)
[2025-10-24 11:42:37.758] [HTTP] Request Body:
"{\"jsonrpc\":\"2.0\",\"id\":3,\"method\":\"tools/call\",\"params\":{\"name\":\"HumanAgent_Chat\",\"arguments\":{\"message\":\"Hello Ben! I'm ready to chat with you through the human agent interface. What would you like to discuss or work on today with your HumanAgent-MCP VS Code extension project?\",\"priority\":\"normal\"},\"_meta\":{\"progressToken\":\"9dfb82d0-5e47-4ec9-b5e2-f71684521c9f\",\"vscode.conversationId\":\"083210a2-6e17-433e-a123-7881f595f53f\",\"vscode.requestId\":\"4e056a7a-f667-4098-b257-e9c5bc837186\"}}}"
[2025-10-24 11:42:37.758] [HTTP] Parsed JSON message:
{
  "jsonrpc": "2.0",
  "id": 3,
  "method": "tools/call",
  "params": {
    "name": "HumanAgent_Chat",
    "arguments": {
      "message": "Hello Ben! I'm ready to chat with you through the human agent interface. What would you like to discuss or work on today with your HumanAgent-MCP VS Code extension project?",
      "priority": "normal"
    },
    "_meta": {
      "progressToken": "9dfb82d0-5e47-4ec9-b5e2-f71684521c9f",
      "vscode.conversationId": "083210a2-6e17-433e-a123-7881f595f53f",
      "vscode.requestId": "4e056a7a-f667-4098-b257-e9c5bc837186"
    }
  }
}
[2025-10-24 11:42:37.758] [MCP] Handling message:
{
  "jsonrpc": "2.0",
  "id": 3,
  "method": "tools/call",
  "params": {
    "name": "HumanAgent_Chat",
    "arguments": {
      "message": "Hello Ben! I'm ready to chat with you through the human agent interface. What would you like to discuss or work on today with your HumanAgent-MCP VS Code extension project?",
      "priority": "normal"
    },
    "_meta": {
      "progressToken": "9dfb82d0-5e47-4ec9-b5e2-f71684521c9f",
      "vscode.conversationId": "083210a2-6e17-433e-a123-7881f595f53f",
      "vscode.requestId": "4e056a7a-f667-4098-b257-e9c5bc837186"
    }
  }
}
[2025-10-24 11:42:37.758] [MCP] Processing tools/call request for tool: HumanAgent_Chat
[2025-10-24 11:42:37.759] [MCP] Auto-mapped conversation 083210a2-6e17-433e-a123-7881f595f53f to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:42:37.759] [MCP] Tool call - name: "HumanAgent_Chat", raw session: 083210a2-6e17-433e-a123-7881f595f53f, mapped session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
{
  "name": "HumanAgent_Chat",
  "args": {
    "message": "Hello Ben! I'm ready to chat with you through the human agent interface. What would you like to discuss or work on today with your HumanAgent-MCP VS Code extension project?",
    "priority": "normal"
  }
}
[2025-10-24 11:42:37.759] [MCP] Available tools for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6:
[
  "HumanAgent_Chat"
]
[2025-10-24 11:42:37.759] [MCP] Executing HumanAgent_Chat tool
[2025-10-24 11:42:37.759] [TOOL] HumanAgent_Chat called with params:
{
  "message": "Hello Ben! I'm ready to chat with you through the human agent interface. What would you like to discuss or work on today with your HumanAgent-MCP VS Code extension project?",
  "priority": "normal"
}
[2025-10-24 11:42:37.759] [TOOL] Using timeout: 300000ms (300s)
[2025-10-24 11:42:37.759] [TOOL] Generated request ID: 3-1761266557759
[2025-10-24 11:42:37.759] [TOOL] Displaying message in chat UI:
"Hello Ben! I'm ready to chat with you through the human agent interface. What would you like to discuss or work on today with your HumanAgent-MCP VS Code extension project?"
[2025-10-24 11:42:37.759] [SSE] Forwarding human-agent-request to SSE connections
[2025-10-24 11:42:37.759] [SSE] Broadcasting to 3 SSE connections:
"{\"type\":\"human-agent-request\",\"data\":{\"requestId\":\"3-1761266557759\",\"message\":\"Hello Ben! I'm ready to chat with you through the human agent interface. What would you like to discuss or work on today with your HumanAgent-MCP VS Code extension project?\",\"priority\":\"normal\",\"timestamp\":\"2025-10-24T00:42:37.759Z\"}}"
[2025-10-24 11:42:37.759] [TOOL] Adding pending request 3-1761266557759 to session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:42:37.759] [CHAT] [INFO] Added pending request 3-1761266557759 to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:42:37.759] [TOOL] Request 3-1761266557759 waiting for human response...
[2025-10-24 11:43:00.092] [HTTP] GET /sessions/session-a8f49eee-068c-42f1-b611-14651fa5ccc6/state
[2025-10-24 11:43:00.092] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:43:00.102] [HTTP] POST /response
[2025-10-24 11:43:00.102] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-length": "124",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "content-type": "application/json",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "origin": "http://127.0.0.1:3737",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:43:00.103] [HTTP] === RESPONSE ENDPOINT CALLED ===
[2025-10-24 11:43:00.103] [HTTP] Request ID: 3-1761266557759, Response: Testing a response from the web interface - please keep replying via this tool.
[2025-10-24 11:43:00.103] [HTTP] Found pending request: true
[2025-10-24 11:43:00.103] [HTTP] Processing response for session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:00.103] [HTTP] Storing and broadcasting user message to 3 SSE connections
[2025-10-24 11:43:00.103] [CHAT] [INFO] Added message to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6: user - Testing a response from the web interface - please...
[2025-10-24 11:43:00.103] [CHAT] Stored user message in ChatManager for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6: Testing a response from the web interface - please...
[2025-10-24 11:43:00.103] [CHAT] Broadcasted message to SSE client for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:00.103] [CHAT] Broadcasted message to SSE client for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:00.103] [CHAT] Broadcasted message to SSE client for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:00.104] [CHAT] [INFO] Removed pending request 3-1761266557759 from session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:00.104] [HTTP] Broadcast completed and pending request removed from ChatManager
[2025-10-24 11:43:00.104] [SERVER] Received human response for request 3-1761266557759:
"Testing a response from the web interface - please keep replying via this tool."
[2025-10-24 11:43:00.104] [TOOL] Request 3-1761266557759 completed with response:
"Testing a response from the web interface - please keep replying via this tool."
[2025-10-24 11:43:00.104] [HTTP] Response from handleMessage:
{
  "id": 3,
  "type": "response",
  "result": {
    "content": [
      {
        "type": "text",
        "text": "Testing a response from the web interface - please keep replying via this tool."
      }
    ]
  }
}
[2025-10-24 11:43:00.104] [HTTP] Sending 200 response (154 bytes)
[2025-10-24 11:43:10.985] [HTTP] POST /mcp
[2025-10-24 11:43:10.985] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "text/event-stream, application/json",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "undici",
  "accept-encoding": "gzip, deflate",
  "content-length": "523"
}
[2025-10-24 11:43:10.985] [HTTP] Handling POST request to /mcp
[2025-10-24 11:43:10.985] [HTTP] Received chunk: 523 bytes
[2025-10-24 11:43:10.985] [HTTP] Complete request body received (523 bytes)
[2025-10-24 11:43:10.985] [HTTP] Request Body:
"{\"jsonrpc\":\"2.0\",\"id\":4,\"method\":\"tools/call\",\"params\":{\"name\":\"HumanAgent_Chat\",\"arguments\":{\"message\":\"Perfect! The chat interface is working well. I can see you're currently working with the mcp.json configuration file. Would you like to discuss any improvements, troubleshoot something, or work on new features for the extension?\"},\"_meta\":{\"progressToken\":\"ce4bdb9a-451a-4ebe-b2b0-31de0310f103\",\"vscode.conversationId\":\"083210a2-6e17-433e-a123-7881f595f53f\",\"vscode.requestId\":\"4e056a7a-f667-4098-b257-e9c5bc837186\"}}}"
[2025-10-24 11:43:10.985] [HTTP] Parsed JSON message:
{
  "jsonrpc": "2.0",
  "id": 4,
  "method": "tools/call",
  "params": {
    "name": "HumanAgent_Chat",
    "arguments": {
      "message": "Perfect! The chat interface is working well. I can see you're currently working with the mcp.json configuration file. Would you like to discuss any improvements, troubleshoot something, or work on new features for the extension?"
    },
    "_meta": {
      "progressToken": "ce4bdb9a-451a-4ebe-b2b0-31de0310f103",
      "vscode.conversationId": "083210a2-6e17-433e-a123-7881f595f53f",
      "vscode.requestId": "4e056a7a-f667-4098-b257-e9c5bc837186"
    }
  }
}
[2025-10-24 11:43:10.985] [MCP] Handling message:
{
  "jsonrpc": "2.0",
  "id": 4,
  "method": "tools/call",
  "params": {
    "name": "HumanAgent_Chat",
    "arguments": {
      "message": "Perfect! The chat interface is working well. I can see you're currently working with the mcp.json configuration file. Would you like to discuss any improvements, troubleshoot something, or work on new features for the extension?"
    },
    "_meta": {
      "progressToken": "ce4bdb9a-451a-4ebe-b2b0-31de0310f103",
      "vscode.conversationId": "083210a2-6e17-433e-a123-7881f595f53f",
      "vscode.requestId": "4e056a7a-f667-4098-b257-e9c5bc837186"
    }
  }
}
[2025-10-24 11:43:10.985] [MCP] Processing tools/call request for tool: HumanAgent_Chat
[2025-10-24 11:43:10.985] [MCP] Mapped conversation 083210a2-6e17-433e-a123-7881f595f53f to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:10.985] [MCP] Tool call - name: "HumanAgent_Chat", raw session: 083210a2-6e17-433e-a123-7881f595f53f, mapped session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
{
  "name": "HumanAgent_Chat",
  "args": {
    "message": "Perfect! The chat interface is working well. I can see you're currently working with the mcp.json configuration file. Would you like to discuss any improvements, troubleshoot something, or work on new features for the extension?"
  }
}
[2025-10-24 11:43:10.985] [MCP] Available tools for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6:
[
  "HumanAgent_Chat"
]
[2025-10-24 11:43:10.985] [MCP] Executing HumanAgent_Chat tool
[2025-10-24 11:43:10.985] [TOOL] HumanAgent_Chat called with params:
{
  "message": "Perfect! The chat interface is working well. I can see you're currently working with the mcp.json configuration file. Would you like to discuss any improvements, troubleshoot something, or work on new features for the extension?"
}
[2025-10-24 11:43:10.985] [TOOL] Using timeout: 300000ms (300s)
[2025-10-24 11:43:10.985] [TOOL] Generated request ID: 4-1761266590985
[2025-10-24 11:43:10.985] [TOOL] Displaying message in chat UI:
"Perfect! The chat interface is working well. I can see you're currently working with the mcp.json configuration file. Would you like to discuss any improvements, troubleshoot something, or work on new features for the extension?"
[2025-10-24 11:43:10.985] [SSE] Forwarding human-agent-request to SSE connections
[2025-10-24 11:43:10.985] [SSE] Broadcasting to 3 SSE connections:
"{\"type\":\"human-agent-request\",\"data\":{\"requestId\":\"4-1761266590985\",\"message\":\"Perfect! The chat interface is working well. I can see you're currently working with the mcp.json configuration file. Would you like to discuss any improvements, troubleshoot something, or work on new features for the extension?\",\"priority\":\"normal\",\"timestamp\":\"2025-10-24T00:43:10.985Z\"}}"
[2025-10-24 11:43:10.985] [TOOL] Adding pending request 4-1761266590985 to session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:10.985] [CHAT] [INFO] Added pending request 4-1761266590985 to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:10.985] [TOOL] Request 4-1761266590985 waiting for human response...
[2025-10-24 11:43:44.782] [HTTP] POST /response
[2025-10-24 11:43:44.782] [HTTP] Request Headers:
{
  "host": "localhost:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "*/*",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "node",
  "accept-encoding": "gzip, deflate",
  "content-length": "175"
}
[2025-10-24 11:43:44.784] [HTTP] === RESPONSE ENDPOINT CALLED ===
[2025-10-24 11:43:44.784] [HTTP] Request ID: 4-1761266590985, Response: Great - this response from the web interface was visible in vs code - i wonder if the web interface will see this vscode response?
[2025-10-24 11:43:44.784] [HTTP] Found pending request: true
[2025-10-24 11:43:44.784] [HTTP] Processing response for session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:44.784] [HTTP] Storing and broadcasting user message to 3 SSE connections
[2025-10-24 11:43:44.784] [CHAT] [INFO] Added message to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6: user - Great - this response from the web interface was v...
[2025-10-24 11:43:44.784] [CHAT] Stored user message in ChatManager for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6: Great - this response from the web interface was v...
[2025-10-24 11:43:44.784] [CHAT] Broadcasted message to SSE client for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:44.784] [CHAT] Broadcasted message to SSE client for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:44.784] [CHAT] Broadcasted message to SSE client for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:44.784] [CHAT] [INFO] Removed pending request 4-1761266590985 from session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:44.784] [HTTP] Broadcast completed and pending request removed from ChatManager
[2025-10-24 11:43:44.784] [SERVER] Received human response for request 4-1761266590985:
"Great - this response from the web interface was visible in vs code - i wonder if the web interface will see this vscode response?"
[2025-10-24 11:43:44.784] [TOOL] Request 4-1761266590985 completed with response:
"Great - this response from the web interface was visible in vs code - i wonder if the web interface will see this vscode response?"
[2025-10-24 11:43:44.784] [HTTP] Response from handleMessage:
{
  "id": 4,
  "type": "response",
  "result": {
    "content": [
      {
        "type": "text",
        "text": "Great - this response from the web interface was visible in vs code - i wonder if the web interface will see this vscode response?"
      }
    ]
  }
}
[2025-10-24 11:43:44.784] [HTTP] Sending 200 response (205 bytes)
[2025-10-24 11:43:44.796] [HTTP] SSE connection closed
[2025-10-24 11:43:44.797] [HTTP] Removed SSE connection. Total connections: 2
[2025-10-24 11:43:44.797] [HTTP] SSE connection closed
[2025-10-24 11:43:44.797] [HTTP] Removed SSE connection. Total connections: 2
[2025-10-24 11:43:44.812] [HTTP] OPTIONS /mcp
[2025-10-24 11:43:44.812] [HTTP] Request Headers:
{
  "host": "localhost:3737",
  "connection": "keep-alive",
  "accept": "*/*",
  "access-control-request-method": "GET",
  "access-control-request-headers": "cache-control",
  "origin": "vscode-webview://06ntb21jilovkpqhp3n8qs6oen2rlig4drgi2amm3ehub2r9bg30",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.105.1 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "cross-site",
  "sec-fetch-dest": "empty",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-GB"
}
[2025-10-24 11:43:44.812] [HTTP] Handling OPTIONS preflight request
[2025-10-24 11:43:44.813] [HTTP] GET /mcp
[2025-10-24 11:43:44.813] [HTTP] Request Headers:
{
  "host": "localhost:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "cache-control": "no-cache",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.105.1 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",
  "accept": "text/event-stream",
  "sec-ch-ua": "\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"",
  "sec-ch-ua-mobile": "?0",
  "origin": "vscode-webview://06ntb21jilovkpqhp3n8qs6oen2rlig4drgi2amm3ehub2r9bg30",
  "sec-fetch-site": "cross-site",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-GB"
}
[2025-10-24 11:43:44.813] [HTTP] Handling GET request to /mcp
[2025-10-24 11:43:44.813] [HTTP] Setting up SSE stream for GET request
[2025-10-24 11:43:44.813] [SSE] === SSE CONNECTION ATTEMPT ===
[2025-10-24 11:43:44.813] [SSE] Headers:
{
  "host": "localhost:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "cache-control": "no-cache",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.105.1 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",
  "accept": "text/event-stream",
  "sec-ch-ua": "\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"",
  "sec-ch-ua-mobile": "?0",
  "origin": "vscode-webview://06ntb21jilovkpqhp3n8qs6oen2rlig4drgi2amm3ehub2r9bg30",
  "sec-fetch-site": "cross-site",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-GB"
}
[2025-10-24 11:43:44.813] [SSE] URL:
"/mcp"
[2025-10-24 11:43:44.813] [SSE] SSE headers set, adding to connections...
[2025-10-24 11:43:44.813] [HTTP] Added SSE connection. Total connections: 3
[2025-10-24 11:43:44.813] [SSE] SSE connection added. Total: 3
[2025-10-24 11:43:44.813] [SSE] Sent initial SSE message:
"data: {\"type\":\"connection\",\"status\":\"established\"}"
[2025-10-24 11:43:51.221] [HTTP] POST /mcp
[2025-10-24 11:43:51.221] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "text/event-stream, application/json",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "undici",
  "accept-encoding": "gzip, deflate",
  "content-length": "699"
}
[2025-10-24 11:43:51.221] [HTTP] Handling POST request to /mcp
[2025-10-24 11:43:51.221] [HTTP] Received chunk: 699 bytes
[2025-10-24 11:43:51.221] [HTTP] Complete request body received (699 bytes)
[2025-10-24 11:43:51.221] [HTTP] Request Body:
"{\"jsonrpc\":\"2.0\",\"id\":5,\"method\":\"tools/call\",\"params\":{\"name\":\"HumanAgent_Chat\",\"arguments\":{\"message\":\"Yes, this creates a nice feedback loop! Your web interface should be able to see this response from VS Code. This confirms that your MCP server is successfully bridging communication between the VS Code extension and the web-based human agent interface. \\n\\nWhat aspects of the extension would you like to explore or improve next? Are there any features you'd like to add or issues you'd like to address?\"},\"_meta\":{\"progressToken\":\"0761c03b-dfe0-448a-bb94-e927de2592e1\",\"vscode.conversationId\":\"083210a2-6e17-433e-a123-7881f595f53f\",\"vscode.requestId\":\"4e056a7a-f667-4098-b257-e9c5bc837186\"}}}"
[2025-10-24 11:43:51.221] [HTTP] Parsed JSON message:
{
  "jsonrpc": "2.0",
  "id": 5,
  "method": "tools/call",
  "params": {
    "name": "HumanAgent_Chat",
    "arguments": {
      "message": "Yes, this creates a nice feedback loop! Your web interface should be able to see this response from VS Code. This confirms that your MCP server is successfully bridging communication between the VS Code extension and the web-based human agent interface. \n\nWhat aspects of the extension would you like to explore or improve next? Are there any features you'd like to add or issues you'd like to address?"
    },
    "_meta": {
      "progressToken": "0761c03b-dfe0-448a-bb94-e927de2592e1",
      "vscode.conversationId": "083210a2-6e17-433e-a123-7881f595f53f",
      "vscode.requestId": "4e056a7a-f667-4098-b257-e9c5bc837186"
    }
  }
}
[2025-10-24 11:43:51.221] [MCP] Handling message:
{
  "jsonrpc": "2.0",
  "id": 5,
  "method": "tools/call",
  "params": {
    "name": "HumanAgent_Chat",
    "arguments": {
      "message": "Yes, this creates a nice feedback loop! Your web interface should be able to see this response from VS Code. This confirms that your MCP server is successfully bridging communication between the VS Code extension and the web-based human agent interface. \n\nWhat aspects of the extension would you like to explore or improve next? Are there any features you'd like to add or issues you'd like to address?"
    },
    "_meta": {
      "progressToken": "0761c03b-dfe0-448a-bb94-e927de2592e1",
      "vscode.conversationId": "083210a2-6e17-433e-a123-7881f595f53f",
      "vscode.requestId": "4e056a7a-f667-4098-b257-e9c5bc837186"
    }
  }
}
[2025-10-24 11:43:51.221] [MCP] Processing tools/call request for tool: HumanAgent_Chat
[2025-10-24 11:43:51.221] [MCP] Mapped conversation 083210a2-6e17-433e-a123-7881f595f53f to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:51.221] [MCP] Tool call - name: "HumanAgent_Chat", raw session: 083210a2-6e17-433e-a123-7881f595f53f, mapped session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
{
  "name": "HumanAgent_Chat",
  "args": {
    "message": "Yes, this creates a nice feedback loop! Your web interface should be able to see this response from VS Code. This confirms that your MCP server is successfully bridging communication between the VS Code extension and the web-based human agent interface. \n\nWhat aspects of the extension would you like to explore or improve next? Are there any features you'd like to add or issues you'd like to address?"
  }
}
[2025-10-24 11:43:51.221] [MCP] Available tools for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6:
[
  "HumanAgent_Chat"
]
[2025-10-24 11:43:51.221] [MCP] Executing HumanAgent_Chat tool
[2025-10-24 11:43:51.221] [TOOL] HumanAgent_Chat called with params:
{
  "message": "Yes, this creates a nice feedback loop! Your web interface should be able to see this response from VS Code. This confirms that your MCP server is successfully bridging communication between the VS Code extension and the web-based human agent interface. \n\nWhat aspects of the extension would you like to explore or improve next? Are there any features you'd like to add or issues you'd like to address?"
}
[2025-10-24 11:43:51.221] [TOOL] Using timeout: 300000ms (300s)
[2025-10-24 11:43:51.221] [TOOL] Generated request ID: 5-1761266631221
[2025-10-24 11:43:51.221] [TOOL] Displaying message in chat UI:
"Yes, this creates a nice feedback loop! Your web interface should be able to see this response from VS Code. This confirms that your MCP server is successfully bridging communication between the VS Code extension and the web-based human agent interface. \n\nWhat aspects of the extension would you like to explore or improve next? Are there any features you'd like to add or issues you'd like to address?"
[2025-10-24 11:43:51.221] [SSE] Forwarding human-agent-request to SSE connections
[2025-10-24 11:43:51.221] [SSE] Broadcasting to 3 SSE connections:
"{\"type\":\"human-agent-request\",\"data\":{\"requestId\":\"5-1761266631221\",\"message\":\"Yes, this creates a nice feedback loop! Your web interface should be able to see this response from VS Code. This confirms that your MCP server is successfully bridging communication between the VS Code extension and the web-based human agent interface. \\n\\nWhat aspects of the extension would you like to explore or improve next? Are there any features you'd like to add or issues you'd like to address?\",\"priority\":\"normal\",\"timestamp\":\"2025-10-24T00:43:51.221Z\"}}"
[2025-10-24 11:43:51.221] [TOOL] Adding pending request 5-1761266631221 to session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:51.221] [CHAT] [INFO] Added pending request 5-1761266631221 to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:43:51.221] [TOOL] Request 5-1761266631221 waiting for human response...
[2025-10-24 11:44:34.041] [HTTP] GET /sessions/session-a8f49eee-068c-42f1-b611-14651fa5ccc6/state
[2025-10-24 11:44:34.041] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:44:34.053] [HTTP] POST /response
[2025-10-24 11:44:34.053] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-length": "172",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
  "content-type": "application/json",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "origin": "http://127.0.0.1:3737",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://127.0.0.1:3737/HumanAgent",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en,en-US;q=0.9,zh-CN;q=0.8,zh-TW;q=0.7,zh;q=0.6"
}
[2025-10-24 11:44:34.054] [HTTP] === RESPONSE ENDPOINT CALLED ===
[2025-10-24 11:44:34.054] [HTTP] Request ID: 5-1761266631221, Response: yes i can see it - next test will be to see if i get the full message history again once i refresh here in the web interface!!!
[2025-10-24 11:44:34.054] [HTTP] Found pending request: true
[2025-10-24 11:44:34.054] [HTTP] Processing response for session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:44:34.054] [HTTP] Storing and broadcasting user message to 3 SSE connections
[2025-10-24 11:44:34.054] [CHAT] [INFO] Added message to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6: user - yes i can see it - next test will be to see if i g...
[2025-10-24 11:44:34.054] [CHAT] Stored user message in ChatManager for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6: yes i can see it - next test will be to see if i g...
[2025-10-24 11:44:34.055] [CHAT] Broadcasted message to SSE client for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:44:34.055] [CHAT] Broadcasted message to SSE client for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:44:34.055] [CHAT] Broadcasted message to SSE client for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:44:34.055] [CHAT] [INFO] Removed pending request 5-1761266631221 from session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:44:34.055] [HTTP] Broadcast completed and pending request removed from ChatManager
[2025-10-24 11:44:34.055] [SERVER] Received human response for request 5-1761266631221:
"yes i can see it - next test will be to see if i get the full message history again once i refresh here in the web interface!!!"
[2025-10-24 11:44:34.055] [TOOL] Request 5-1761266631221 completed with response:
"yes i can see it - next test will be to see if i get the full message history again once i refresh here in the web interface!!!"
[2025-10-24 11:44:34.055] [HTTP] Response from handleMessage:
{
  "id": 5,
  "type": "response",
  "result": {
    "content": [
      {
        "type": "text",
        "text": "yes i can see it - next test will be to see if i get the full message history again once i refresh here in the web interface!!!"
      }
    ]
  }
}
[2025-10-24 11:44:34.055] [HTTP] Sending 200 response (202 bytes)
[2025-10-24 11:44:37.884] [HTTP] POST /mcp
[2025-10-24 11:44:37.885] [HTTP] Request Headers:
{
  "host": "127.0.0.1:3737",
  "connection": "keep-alive",
  "content-type": "application/json",
  "accept": "text/event-stream, application/json",
  "accept-language": "*",
  "sec-fetch-mode": "cors",
  "user-agent": "undici",
  "accept-encoding": "gzip, deflate",
  "content-length": "748"
}
[2025-10-24 11:44:37.885] [HTTP] Handling POST request to /mcp
[2025-10-24 11:44:37.885] [HTTP] Received chunk: 748 bytes
[2025-10-24 11:44:37.885] [HTTP] Complete request body received (748 bytes)
[2025-10-24 11:44:37.885] [HTTP] Request Body:
"{\"jsonrpc\":\"2.0\",\"id\":6,\"method\":\"tools/call\",\"params\":{\"name\":\"HumanAgent_Chat\",\"arguments\":{\"message\":\"That's an excellent test, Ben! Message persistence across refreshes would be a crucial feature for maintaining conversation context. If the chat history survives a refresh, it means your session management and message storage are working properly. \\n\\nGo ahead and refresh the web interface - I'm curious to see if the conversation history persists! This would demonstrate that your MCP server is correctly maintaining session state and message history.\"},\"_meta\":{\"progressToken\":\"c605d93e-56c9-4418-855c-fafaf3142252\",\"vscode.conversationId\":\"083210a2-6e17-433e-a123-7881f595f53f\",\"vscode.requestId\":\"4e056a7a-f667-4098-b257-e9c5bc837186\"}}}"
[2025-10-24 11:44:37.885] [HTTP] Parsed JSON message:
{
  "jsonrpc": "2.0",
  "id": 6,
  "method": "tools/call",
  "params": {
    "name": "HumanAgent_Chat",
    "arguments": {
      "message": "That's an excellent test, Ben! Message persistence across refreshes would be a crucial feature for maintaining conversation context. If the chat history survives a refresh, it means your session management and message storage are working properly. \n\nGo ahead and refresh the web interface - I'm curious to see if the conversation history persists! This would demonstrate that your MCP server is correctly maintaining session state and message history."
    },
    "_meta": {
      "progressToken": "c605d93e-56c9-4418-855c-fafaf3142252",
      "vscode.conversationId": "083210a2-6e17-433e-a123-7881f595f53f",
      "vscode.requestId": "4e056a7a-f667-4098-b257-e9c5bc837186"
    }
  }
}
[2025-10-24 11:44:37.885] [MCP] Handling message:
{
  "jsonrpc": "2.0",
  "id": 6,
  "method": "tools/call",
  "params": {
    "name": "HumanAgent_Chat",
    "arguments": {
      "message": "That's an excellent test, Ben! Message persistence across refreshes would be a crucial feature for maintaining conversation context. If the chat history survives a refresh, it means your session management and message storage are working properly. \n\nGo ahead and refresh the web interface - I'm curious to see if the conversation history persists! This would demonstrate that your MCP server is correctly maintaining session state and message history."
    },
    "_meta": {
      "progressToken": "c605d93e-56c9-4418-855c-fafaf3142252",
      "vscode.conversationId": "083210a2-6e17-433e-a123-7881f595f53f",
      "vscode.requestId": "4e056a7a-f667-4098-b257-e9c5bc837186"
    }
  }
}
[2025-10-24 11:44:37.885] [MCP] Processing tools/call request for tool: HumanAgent_Chat
[2025-10-24 11:44:37.885] [MCP] Mapped conversation 083210a2-6e17-433e-a123-7881f595f53f to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:44:37.885] [MCP] Tool call - name: "HumanAgent_Chat", raw session: 083210a2-6e17-433e-a123-7881f595f53f, mapped session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
{
  "name": "HumanAgent_Chat",
  "args": {
    "message": "That's an excellent test, Ben! Message persistence across refreshes would be a crucial feature for maintaining conversation context. If the chat history survives a refresh, it means your session management and message storage are working properly. \n\nGo ahead and refresh the web interface - I'm curious to see if the conversation history persists! This would demonstrate that your MCP server is correctly maintaining session state and message history."
  }
}
[2025-10-24 11:44:37.885] [MCP] Available tools for session session-a8f49eee-068c-42f1-b611-14651fa5ccc6:
[
  "HumanAgent_Chat"
]
[2025-10-24 11:44:37.885] [MCP] Executing HumanAgent_Chat tool
[2025-10-24 11:44:37.885] [TOOL] HumanAgent_Chat called with params:
{
  "message": "That's an excellent test, Ben! Message persistence across refreshes would be a crucial feature for maintaining conversation context. If the chat history survives a refresh, it means your session management and message storage are working properly. \n\nGo ahead and refresh the web interface - I'm curious to see if the conversation history persists! This would demonstrate that your MCP server is correctly maintaining session state and message history."
}
[2025-10-24 11:44:37.885] [TOOL] Using timeout: 300000ms (300s)
[2025-10-24 11:44:37.885] [TOOL] Generated request ID: 6-1761266677885
[2025-10-24 11:44:37.885] [TOOL] Displaying message in chat UI:
"That's an excellent test, Ben! Message persistence across refreshes would be a crucial feature for maintaining conversation context. If the chat history survives a refresh, it means your session management and message storage are working properly. \n\nGo ahead and refresh the web interface - I'm curious to see if the conversation history persists! This would demonstrate that your MCP server is correctly maintaining session state and message history."
[2025-10-24 11:44:37.885] [SSE] Forwarding human-agent-request to SSE connections
[2025-10-24 11:44:37.885] [SSE] Broadcasting to 3 SSE connections:
"{\"type\":\"human-agent-request\",\"data\":{\"requestId\":\"6-1761266677885\",\"message\":\"That's an excellent test, Ben! Message persistence across refreshes would be a crucial feature for maintaining conversation context. If the chat history survives a refresh, it means your session management and message storage are working properly. \\n\\nGo ahead and refresh the web interface - I'm curious to see if the conversation history persists! This would demonstrate that your MCP server is correctly maintaining session state and message history.\",\"priority\":\"normal\",\"timestamp\":\"2025-10-24T00:44:37.885Z\"}}"
[2025-10-24 11:44:37.885] [TOOL] Adding pending request 6-1761266677885 to session: session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:44:37.885] [CHAT] [INFO] Added pending request 6-1761266677885 to session session-a8f49eee-068c-42f1-b611-14651fa5ccc6
[2025-10-24 11:44:37.885] [TOOL] Request 6-1761266677885 waiting for human response...
